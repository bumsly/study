요약 : 박운성

# 4.1 서버 사이드 렌더링이란?

## **4.1.1 싱글 페이지 애플리케이션의 세상**

### **싱글 페이지 애플리케이션이란?**

- 렌더링과 라우팅에 필요한 대부분의 기능을 서버가 아닌 브라우저의 자바스크립트에 의존하는 방식을 의미합니다.
- 최초에 첫 페이지에서 데이터를 모두 불러온 이후에는 서버에서 HTML을 내려받지 않고 하나의 페이지에서 모든 작업을 처리하므로 싱글 페이지 애플리케이션이라고 합니다.
- SPA의 HTML 코드에 관한 내용
  - SPA로 만들어진 사이트에 접속하면 전체 사이트를 모두 볼 수 있지만 실제로 소스 보기로 HTML 코드를 봤을 때는 body 태그 내부에 아무런 내용이 없습니다.
  - 이는 사이트 렌더링에 필요한 body 태그 내부의 내용을 모두 자바스크립트에 코드로 삽입한 이후에 렌더링하기 때문입니다.
  - 최초에 서버에서 최소한의 데이터를 불러온 이후부터는 이미 가지고 있는 자바스크립트 리소스와 브라우저 API를 기반으로 모든 작동이 이뤄집니다.
  - 단점: 최초에 로딩해야 할 자바스크립트 리소스가 커집니다.
  - 장점: 한번 로딩된 이후에는 서버를 거쳐 필요한 리소스를 받아올 일이 적어지기 때문에 사용자에게 훌륭한 UI/UX를 제공합니다.

### **전통적인 방식의 애플리케이션과 싱글 페이지 애플리케이션의 작동 비교**

- **전통적인 방식의 애플리케이션**
  - 페이지 전환이 발생할 때마다 새롭게 페이지를 요청하고, HTML 페이지를 다운로드해 파싱하는 작업을 거칩니다.
  - 이 과정은 페이지를 처음부터 새로 그려야 해서 일부 사용자는 페이지가 전환될 때 부자연스러운 모습을 보게 됩니다.
- **싱글 페이지 애플리케이션**
  - 페이지 전환을 모두 자바스크립트로 한다면 최초에 한번 모든 리소스를 다운로드하고 나면 이후 페이지를 전환할 때 추가로 리소스를 다운로드하는 시간이 필요 없어집니다.
  - 경우에 따라 페이지 전환에 필요한 일부 영역만 다시 그리게 되므로 훨씬 더 매끄러운 UI를 보여줄 수 있게 됩니다.

### **싱글 페이지 렌더링 방식의 유행과 JAM 스택의 등장**

- 싱글 페이지 렌더링 방식의 유행
  - 프런트엔드 개발자들에게 좀 더 간편한 개발 경험을 제공했고, 더욱 간편하게 웹 애플리케이션을 만들 수 있다는 장점이 있습니다.
  - 이러한 장점과 시대적인 요구로 많은 싱글 페이지 애플리케이션이 개발되기 시작했습니다.
- JAM 스택
  - 싱글 페이지 애플리케이션의 유행으로 인해 새롭게 생겨난 용어가 바로 JAM(JavaScript, API, Markup) 스택입니다.
  - 과거에는 자바스크립트에서 할 수 있는 일이 제한적이었기 때문에 대부분의 처리를 서버에서 해야만 했습니다.
  - 앞서 언급한 프레임워크의 등장으로 JAM 스택이 등장하게 되었습니다.
  - 이러한 JAM 스택의 인기와 Node.js의 고도화에 힘입어 MEAN(MongoDB, Express.js, AngularJS, Node.js)이나 MERN(MongoDB, Express.js, React, Node.js) 스택처럼 아예 API 서버 자체도 자바스크립트로 구현하는 구조가 인기를 끌기 시작했습니다.

### **새로운 패러다임의 웹서비스를 향한 요구**

- 자바스크립트 코드의 규모가 커지면서 이에 대해 우려하기 시작했지만 인터넷 속도의 증가, 프로세서나 메모리 등 하드웨어 성능 발전으로 이러한 문제가 자연스럽게 해결될 것이라 기대하기도 했습니다.
- 그러나 웹 애플리케이션에서 제공하는 자바스크립트 리소스 크기와 수 모두 증가하기 시작했습니다.
- 자바스크립트 파싱을 위해 CPU를 소비하는 시간이 눈에 띄게 증가했는데 그만큼 자바스크립트에서 처리해야 하는 코드의 절대적인 양이 증가했음을 알 수 있습니다.
- 중요한 사실 중 하나는 웹 전반을 이루는 환경이 크게 개선됐음에도 실제 사용자들이 느끼는 웹 애플리케이션의 로딩 속도는 과거와 크게 차이가 없거나 지금이 더 느리다는 것입니다.

## **4.1.2 서버 사이드 렌더링이란?**

### **서버 사이드 렌더링이란?**

- 최초에 사용자에게 보여줄 페이지를 서버에서 렌더링해 빠르게 사용자에게 화면을 제공하는 방식입니다.
- 웹페이지가 점점 느려지는 상황에 대한 문제의식을 SPA의 태생적인 한계에서 찾고, 이를 개선하고자 서버에서 페이지를 렌더링해 제공하는 기존 방식의 웹 개발이 다시 떠오르고 있습니다.
- 서버 사이드 렌더링은 서버에서 제공하기 때문에 비교적 안정적인 렌더링이 가능합니다.

### **서버 사이드 렌더링의 장점**

- 최초 페이지 진입이 비교적 빠릅니다.
- 검색 엔진과 SNS 공유 등 메타데이터 제공이 쉽습니다.
- 누적 레이아웃 이동이 적습니다.
- 사용자의 디바이스 성능에 비교적 자유롭습니다.
- 보안에 좀 더 안전합니다.

### **서버 사이드 렌더링의 단점**

- 소스코드를 작성할 때 항상 서버를 고려해야 합니다.
- 적절한 서버가 구축돼 있어야 합니다.
- 서비스 지연에 따른 문제가 발생할 수 있습니다.

## **4.1.3 SPA와 SSR을 모두 알아야 하는 이유**

### **서버 사이드 렌더링 역시 만능이 아니다.**

- 잘못된 웹페이지 설계는 성능을 해칠 뿐만 아니라 성능 개선도 얻지 못하고 서버와 클라이언트 두군데로 관리 포인트가 늘어나기만 하는 역효과를 낳을 수도 있습니다.
- 웹페이지의 설계와 목적, 우선순위에 따라 싱글 페이지 애플리케이션이 더 효율적일 수도 있습니다.

### **싱글 페이지 애플리케이션과 서버 사이드 렌더링 애플리케이션**

- 가장 뛰어난 싱글 페이지 애플리케이션은 가장 뛰어난 멀티 페이지 애플리케이션보다 낫습니다.
- 평균적인 싱글 페이지 애플리케이션은 평균적인 멀티 페이지 애플리케이션보다 느립니다.
- 두 가지 모두 장단점이 있으며 어느 하나가 완벽하다고 볼 수 없습니다.

### **현대의 서버 사이드 렌더링**

- **기존 LAMP 스택**
  - 모든 페이지 빌드를 서버에서 렌더링해 초기 페이지 진입이 빠르다는 장점이 있지만 이후에 라우팅이 발생할 때도 마찬가지로 서버에 의존해야 하기 때문에 싱글 페이지 렌더링 방식에 비해 라우팅이 느리다는 단점이 있습니다.
- **요즘의 서버 사이드 렌더링**
  - 최초 웹사이트 진입 시에는 서버 사이드 렌더링 방식으로 서버에서 완성된 HTML을 제공받습니다.
  - 이후 라우팅에서는 서버에서 내려받은 자바스크립트를 바탕으로 마치 싱글 페이지 애플리케이션처럼 작동합니다.
  - Next.js, Remix 등 요즘 각광받는 서버 사이드 렌더링 프레임워크는 모두 이러한 방식으로 작동해 사용자에게 더 나은 웹사이트 경험을 안겨줍니다.
  - 이러한 라우팅과 렌더링 방식을 이해하지 못하면 LAMP 스택과 다름없는 멀티 페이지 애플리케이션을 만들어버릴 수도 있고, 혹은 서버에서 아무런 작동도 하지 않는 싱글 페이지 애플리케이션 방식의 잘못된 웹서비스를 만들어 버릴 수도 있습니다.
- 프런트엔드 개발자는 서버에서의 렌더링, 그리고 클라이언트에서의 렌더링을 모두 이해해야 두 가지 장점을 완벽하게 취하는 제대로 된 웹서비스를 구축할 수 있습니다.

## **4.1.4. 정리**

- 다수의 사용자에게 좋은 사용자 경험을 제공할 수 있는 웹 애플리케이션을 만들고 싶은 리액트 개발자라면 두 가지 방법을 모두 숙지할 필요가 있습니다.
- 둘 중 어느 것이 완벽하게 옳다고 말할 수 없으므로 두 가지 모두를 이해하고 필요에 따라 맞는 방법을 사용할 수 있습니다.
